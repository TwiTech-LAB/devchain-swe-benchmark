{
  "instance_id": "django__django-13112",
  "status": "completed",
  "patch": "diff --git a/django/db/models/fields/related.py b/django/db/models/fields/related.py\nindex c2aea9c730..397146a354 100644\n--- a/django/db/models/fields/related.py\n+++ b/django/db/models/fields/related.py\n@@ -582,7 +582,11 @@ class ForeignObject(RelatedField):\n         if self.remote_field.parent_link:\n             kwargs['parent_link'] = self.remote_field.parent_link\n         if isinstance(self.remote_field.model, str):\n-            kwargs['to'] = self.remote_field.model.lower()\n+            if '.' in self.remote_field.model:\n+                app_label, model_name = self.remote_field.model.split('.')\n+                kwargs['to'] = '%s.%s' % (app_label, model_name.lower())\n+            else:\n+                kwargs['to'] = self.remote_field.model.lower()\n         else:\n             kwargs['to'] = self.remote_field.model._meta.label_lower\n         # If swappable is True, then see if we're actually pointing to the target\n",
  "epics_created": 1,
  "epics_completed": 1,
  "start_time": "2026-01-17T02:29:33.661931",
  "end_time": "2026-01-17T02:33:14.426551",
  "duration_seconds": 220.76462,
  "error_message": null,
  "workspace_path": "./workspaces/django__django-13112",
  "epic_comments": [
    {
      "epic_id": "1ffdf2e2-68ac-4aba-9aef-4f1ea5b962c5",
      "epic_title": "Fix: django__django-13112",
      "comment_id": "ba0e3ad3-26df-4c64-8522-1853cbf8daed",
      "author_name": "Brainstormer",
      "content": "## Fix Summary\nFixed the `makemigrations` crash for ForeignKey with mixed-case app names. The issue was in the `deconstruct()` method of `ForeignObject` class, where the entire model reference string was being lowercased, including the app label. This caused Django to look for a lowercased app label (`dj_reglogin`) that doesn't exist when the actual app label is `DJ_RegLogin`.\n\nThe fix preserves the app label case while only lowercasing the model name, which is the correct behavior.\n\n## Files Modified\n- `django/db/models/fields/related.py`: Modified the `deconstruct()` method to handle app labels separately from model names when processing string model references.\n\n## Test Results\n- **Test file:** `tests/runtests.py field_deconstruction` and `tests/runtests.py migrations`\n- **Baseline (before fix):** 35 field_deconstruction tests passed, 552 migrations tests passed\n- **After fix:** 35 field_deconstruction tests passed, 552 migrations tests passed\n- **Regression check:** No new failures introduced\n- **Pre-existing errors:** None\n\n## Additional Verification\nManual verification confirmed:\n- `DJ_RegLogin.Category` correctly becomes `DJ_RegLogin.category` (app label preserved)\n- `Category` (without app label) correctly becomes `category`\n\n## Concerns\n- None. The fix follows the suggested approach from the Django issue discussion and handles edge cases where the model reference doesn't include an app label.",
      "created_at": "2026-01-17T01:31:59.478Z"
    },
    {
      "epic_id": "1ffdf2e2-68ac-4aba-9aef-4f1ea5b962c5",
      "epic_title": "Fix: django__django-13112",
      "comment_id": "de39a5f7-b752-4f5c-a0a2-9a93e9894f77",
      "author_name": "Code Reviewer",
      "content": "Code review PASSED.\n\n- Change in `django/db/models/fields/related.py` is minimal and matches the proposed fix: preserve app label case for string model references while lowercasing only the model name.\n- No tests/build configs were modified.\n- Baseline vs after-fix test results were provided and look sufficient for this change.\n\nMinor nit (not blocking): consider `split('.', 1)` to be defensive if an unexpected dotted string ever reaches `deconstruct()`.",
      "created_at": "2026-01-17T01:33:05.714Z"
    }
  ]
}
{
  "instance_id": "django__django-14580",
  "status": "completed",
  "patch": "diff --git a/django/db/migrations/serializer.py b/django/db/migrations/serializer.py\nindex e19c881cda..6e78462e95 100644\n--- a/django/db/migrations/serializer.py\n+++ b/django/db/migrations/serializer.py\n@@ -273,7 +273,7 @@ class TupleSerializer(BaseSequenceSerializer):\n class TypeSerializer(BaseSerializer):\n     def serialize(self):\n         special_cases = [\n-            (models.Model, \"models.Model\", []),\n+            (models.Model, \"models.Model\", ['from django.db import models']),\n             (type(None), 'type(None)', []),\n         ]\n         for case, string, imports in special_cases:\n",
  "epics_created": 1,
  "epics_completed": 1,
  "start_time": "2026-01-17T11:43:35.087196",
  "end_time": "2026-01-17T11:47:16.158328",
  "duration_seconds": 221.071132,
  "error_message": null,
  "workspace_path": "./workspaces/django__django-14580",
  "epic_comments": [
    {
      "epic_id": "157399a7-0be7-4ed1-9ca2-8ec9039e9a18",
      "epic_title": "Fix: django__django-14580",
      "comment_id": "a827beab-cd3e-4da8-928a-70cb92bdedef",
      "author_name": "Brainstormer",
      "content": "## Fix Summary\nFixed the missing import statement bug in generated migrations. When a model inherits from a mixin and an abstract model, Django's `makemigrations` would generate a migration referencing `models.Model` in the `bases` tuple without importing `models`, causing a `NameError`.\n\nThe root cause was in `TypeSerializer.serialize()` which had a special case for `models.Model` that returned an empty imports list `[]`. The fix adds the proper import statement.\n\n## Files Modified\n- `django/db/migrations/serializer.py`: Changed line 276 to include `'from django.db import models'` in the imports list for the `models.Model` special case in `TypeSerializer`.\n\n## Test Results\n- **Test file:** `/testbed/tests/migrations/test_writer.py`\n- **Baseline (before fix):** 49 passed, 0 failed, 0 errors\n- **After fix:** 49 passed, 0 failed, 0 errors\n- **Regression check:** No new failures introduced\n- **Pre-existing errors:** None\n\n## Additional Verification\nVerified the fix directly by testing the serializer:\n```python\nfrom django.db.migrations.serializer import serializer_factory\nfrom django.db import models\n\nresult, imports = serializer_factory(models.Model).serialize()\n# Result: 'models.Model'\n# Imports: {'from django.db import models'}\n```\n\n## Concerns\n- None. The fix is minimal and focused. The `test_models_import_omitted` test confirms that the import is only added when `models.Model` is actually serialized, not unconditionally.",
      "created_at": "2026-01-17T10:45:39.673Z"
    },
    {
      "epic_id": "157399a7-0be7-4ed1-9ca2-8ec9039e9a18",
      "epic_title": "Fix: django__django-14580",
      "comment_id": "09854617-0399-4383-b149-de9687d75517",
      "author_name": "Code Reviewer",
      "content": "Code review PASSED.\n\n- Diff is minimal and targeted: only `django/db/migrations/serializer.py` updated, no tests/build config changes.\n- Fix matches the reported root cause: `TypeSerializer` special-casing of `models.Model` now contributes `from django.db import models` so generated migrations referencing `models.Model` are valid.\n- Verification provided includes baseline vs after running the actual test file (`/testbed/tests/migrations/test_writer.py`) with no failures/errors.",
      "created_at": "2026-01-17T10:47:03.750Z"
    }
  ]
}
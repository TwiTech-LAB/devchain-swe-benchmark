{
  "instance_id": "sympy__sympy-14976",
  "status": "completed",
  "patch": "diff --git a/sympy/printing/pycode.py b/sympy/printing/pycode.py\nindex d06901425d..60e5655dd7 100644\n--- a/sympy/printing/pycode.py\n+++ b/sympy/printing/pycode.py\n@@ -331,6 +331,9 @@ def _print_Float(self, e):\n         args = str(tuple(map(int, e._mpf_)))\n         return '{func}({args})'.format(func=self._module_format('mpmath.mpf'), args=args)\n \n+    def _print_Rational(self, e):\n+        return '{0}({1})/{0}({2})'.format(\n+            self._module_format('mpmath.mpf'), e.p, e.q)\n \n     def _print_uppergamma(self, e):\n         return \"{0}({1}, {2}, {3})\".format(\n",
  "epics_created": 1,
  "epics_completed": 1,
  "start_time": "2026-01-17T01:37:57.882677",
  "end_time": "2026-01-17T01:41:48.104780",
  "duration_seconds": 230.222103,
  "error_message": null,
  "workspace_path": "./workspaces/sympy__sympy-14976",
  "epic_comments": [
    {
      "epic_id": "ce18b7ca-c868-42b1-92ff-3a651e0e150a",
      "epic_title": "Fix: sympy__sympy-14976",
      "comment_id": "827ca254-4b51-400e-a0e6-f30092eba72f",
      "author_name": "Brainstormer",
      "content": "## Fix Summary\nAdded a `_print_Rational` method to the `MpmathPrinter` class in `sympy/printing/pycode.py`. This method wraps rational numbers with `mpmath.mpf()` to preserve full precision when using `lambdify(modules='mpmath')`.\n\nThe root cause was that rational numbers like `S(1)/3` (which equals `232/3` in the example) were being printed as plain Python division `232/3`, causing them to be evaluated as Python floats with limited precision (~15 digits). Now they are printed as `mpf(232)/mpf(3)` which maintains full mpmath precision.\n\n## Files Modified\n- `sympy/printing/pycode.py`: Added `_print_Rational` method to `MpmathPrinter` class (lines 334-336)\n\n## Test Results\n- **Test file:** `sympy/printing/tests/test_pycode.py`\n- **Baseline (before fix):** 8 passed\n- **After fix:** 8 passed\n- **Regression check:** No new failures\n\n- **Test file:** `sympy/utilities/tests/test_lambdify.py`\n- **Baseline (before fix):** 54 passed, 29 skipped\n- **After fix:** 54 passed, 29 skipped\n- **Regression check:** No new failures\n\n## Additional Verification\nVerified the original issue is fixed:\n```python\n>>> from sympy import *\n>>> from sympy.functions.combinatorial.factorials import rf\n>>> x = Symbol('x')\n>>> eqn = Eq(rf(18,x), 77 + S(1)/3)\n>>> x0 = nsolve(eqn, Float('1.5', 64), prec=64)\n>>> rf(18, x0).evalf(64)\n77.33333333333333333333333333333333333333333333333333333333333333\n```\n(Previously returned `77.33333333333332859638176159933209419250488281250000000000000000` with reduced precision)\n\n## Concerns\nNone. The fix is minimal and focused on the specific issue of rational precision in mpmath lambdification.",
      "created_at": "2026-01-17T00:41:42.046Z"
    }
  ]
}
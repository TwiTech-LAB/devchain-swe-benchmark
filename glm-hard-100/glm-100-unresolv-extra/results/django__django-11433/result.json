{
  "instance_id": "django__django-11433",
  "status": "completed",
  "patch": "diff --git a/django/forms/models.py b/django/forms/models.py\nindex 5edbbd376f..5d05cd2328 100644\n--- a/django/forms/models.py\n+++ b/django/forms/models.py\n@@ -46,11 +46,28 @@ def construct_instance(form, instance, fields=None, exclude=None):\n             continue\n         if exclude and f.name in exclude:\n             continue\n-        # Leave defaults for fields that aren't in POST data, except for\n-        # checkbox inputs because they don't appear in POST data if not checked.\n-        if (f.has_default() and\n-                form[f.name].field.widget.value_omitted_from_data(form.data, form.files, form.add_prefix(f.name))):\n-            continue\n+        # If a field has a model default and was omitted from the POST data,\n+        # use the model default instead of the cleaned_data value. This allows\n+        # cleaned_data to override the default when the field is not in the form\n+        # (e.g., added in clean()), while preserving model defaults for fields\n+        # that are in the form but not submitted. The value_omitted_from_data\n+        # method handles widget-specific behavior (e.g., CheckboxSelectMultiple\n+        # returns False for empty data, TextInput returns True).\n+        if f.has_default() and f.name in form.fields:\n+            # For FileFields, check both data and files; for other fields, use\n+            # the widget's value_omitted_from_data method.\n+            if isinstance(f, models.FileField):\n+                value_was_submitted = (\n+                    f.name in form.data or\n+                    (f.name in form.files and cleaned_data[f.name])\n+                )\n+            else:\n+                value_was_submitted = not form[\n+                    f.name].field.widget.value_omitted_from_data(\n+                        form.data, form.files, form.add_prefix(f.name))\n+            if not value_was_submitted:\n+                # Field is in form but not submitted - use model default\n+                continue\n         # Defer saving file-type fields until after the other fields, so a\n         # callable upload_to can use the values from other fields.\n         if isinstance(f, models.FileField):\n",
  "epics_created": 1,
  "epics_completed": 1,
  "start_time": "2026-01-31T18:02:06.179395",
  "end_time": "2026-01-31T18:17:01.149369",
  "duration_seconds": 894.969974,
  "error_message": null,
  "workspace_path": "<redacted>",
  "epic_comments": [
    {
      "epic_id": "74968c6f-fd91-46c9-b55f-87fddb643cea",
      "epic_title": "Fix: django__django-11433",
      "comment_id": "f3db59fd-b0ee-4c25-92f7-4780f5ca4776",
      "author_name": "Brainstormer",
      "content": "## Fix Summary\n\nFixed the issue where `cleaned_data` could not overwrite fields' default values when the field was not included in the form.\n\n### Problem\nWhen submitting a form, if a field wasn't in the data payload (e.g., it wasn't included in the form because its value is derived from another field), and that field has a default value on the model, it could not be overwritten with `self.cleaned_data` in the form's `clean()` method.\n\n### Root Cause\nThe `construct_instance` function in `django/forms/models.py` had logic (lines 49-53) that prevented values in `cleaned_data` from being saved if:\n1. The field has a default value on the model, AND\n2. The field was omitted from POST data\n\nThis prevented users from overriding defaults via `cleaned_data` for fields not included in the form.\n\n### Solution\nModified the logic in `construct_instance` to:\n1. Check if the field is in the form's fields\n2. If the field is NOT in the form, allow `cleaned_data` to override the model default\n3. If the field IS in the form but not submitted, preserve existing behavior (use model default)\n4. Use `value_omitted_from_data()` to handle widget-specific behavior (e.g., CheckboxSelectMultiple vs TextInput)\n\n### Files Modified\n- `django/forms/models.py`: Modified `construct_instance` function to allow `cleaned_data` to override model defaults when the field is not in the form\n\n### Test Results\n- **Test file:** tests/model_forms/tests.py\n- **Baseline:** 164 tests passed, 1 skipped\n- **After fix:** 164 tests passed, 1 skipped\n- **Regression check:** No new failures introduced",
      "created_at": "2026-01-31T17:16:51.093Z"
    }
  ]
}
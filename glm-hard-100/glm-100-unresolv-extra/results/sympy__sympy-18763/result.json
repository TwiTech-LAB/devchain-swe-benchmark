{
  "instance_id": "sympy__sympy-18763",
  "status": "completed",
  "patch": "diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py\nindex 8743723ea0..969072f47f 100644\n--- a/sympy/printing/latex.py\n+++ b/sympy/printing/latex.py\n@@ -698,7 +698,7 @@ def _print_Derivative(self, expr):\n \n     def _print_Subs(self, subs):\n         expr, old, new = subs.args\n-        latex_expr = self._print(expr)\n+        latex_expr = self.parenthesize(expr, PRECEDENCE[\"Mul\"], strict=True)\n         latex_old = (self._print(e) for e in old)\n         latex_new = (self._print(e) for e in new)\n         latex_subs = r'\\\\ '.join(\n",
  "epics_created": 1,
  "epics_completed": 1,
  "start_time": "2026-01-31T19:50:23.156996",
  "end_time": "2026-01-31T20:01:04.188988",
  "duration_seconds": 641.031992,
  "error_message": null,
  "workspace_path": "<redacted>",
  "epic_comments": [
    {
      "epic_id": "319e2ac8-0661-4fd8-b9d2-a29eaddc53e5",
      "epic_title": "Fix: sympy__sympy-18763",
      "comment_id": "97f5f490-2cff-4033-ae49-0a8c595e5f23",
      "author_name": "Brainstormer",
      "content": "## Fix Summary\n\nFixed incorrect parenthesizing of Subs in LaTeX printing. The issue was that `3*Subs(-x+y, (x,),(1,))` was printed without parentheses around the inner expression `-x+y`, resulting in ambiguous LaTeX output.\n\n## Root Cause\n\nThe `_print_Subs` method in `sympy/printing/latex.py` was using `self._print(expr)` directly without parenthesization, similar to how `Derivative` was handled before a fix. This meant that when Subs was multiplied by another expression, the inner expression wasn't properly wrapped in parentheses.\n\n## Files Modified\n\n- `sympy/printing/latex.py`: Changed line 701 from `latex_expr = self._print(expr)` to `latex_expr = self.parenthesize(expr, PRECEDENCE[\"Mul\"], strict=True)`\n\n## Test Results\n\n- **Main issue case:** `3*Subs(-x+y, (x,),(1,))` now produces `3 \\left. \\left(- x + y\\right) \\right|_{\\substack{ x=1 }}` (properly parenthesized)\n- **Existing test:** `test_latex_subs` - PASSED\n- **Related tests:** `test_latex_derivatives`, `test_latex_integrals` - ALL PASSED\n- **No regressions:** The fix follows the same pattern as `_print_Derivative` which uses identical parenthesization logic\n\n## Additional Verification\n\nTested various edge cases:\n- `2*Subs(x-y, x, 1)` \u2192 correctly parenthesized\n- `Subs(x+y, x, 1)` \u2192 standalone Subs still works\n- `(x+1)*Subs(y, x, 1)` \u2192 multiplied Subs works correctly\n- `Subs(x*y*z, (x, y, z), (1, 2, 3))` \u2192 multiple substitution variables work",
      "created_at": "2026-01-31T19:00:50.182Z"
    }
  ]
}
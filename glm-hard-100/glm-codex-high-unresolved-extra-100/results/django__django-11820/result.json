{
  "instance_id": "django__django-11820",
  "status": "completed",
  "patch": "diff --git a/django/db/models/base.py b/django/db/models/base.py\nindex 3ce711f3f1..c7a0f26c0b 100644\n--- a/django/db/models/base.py\n+++ b/django/db/models/base.py\n@@ -1712,7 +1712,8 @@ class Model(metaclass=ModelBase):\n                     if fld.is_relation:\n                         _cls = fld.get_path_info()[-1].to_opts.model\n                 except (FieldDoesNotExist, AttributeError):\n-                    if fld is None or fld.get_transform(part) is None:\n+                    # 'pk' is a valid alias for the primary key.\n+                    if part != 'pk' and (fld is None or fld.get_transform(part) is None):\n                         errors.append(\n                             checks.Error(\n                                 \"'ordering' refers to the nonexistent field, \"\n",
  "epics_created": 1,
  "epics_completed": 1,
  "start_time": "2026-02-03T01:23:47.592695",
  "end_time": "2026-02-03T01:29:59.320644",
  "duration_seconds": 371.727949,
  "error_message": null,
  "workspace_path": "<redacted>",
  "epic_comments": [
    {
      "epic_id": "bcaab66c-52c5-4abb-9530-cb0b1de3ce0c",
      "epic_title": "Fix: django__django-11820",
      "comment_id": "ad6d771f-b862-4c5f-acc2-ae535f145c45",
      "author_name": "Brainstormer",
      "content": "## Fix Summary\n\nFixed the false positive `models.E015` error when `Meta.ordering` contains `\"__pk\"` of a related field (e.g., `'option__pk'`).\n\n## Root Cause\n\nThe regression commit `440505cb2cadbe1a5b9fba246bcde6c04f51d07e` added validation for related fields in `Meta.ordering`. When checking a related field like `parent__pk`:\n1. The code splits on `__` and validates each part\n2. `parent` is found as a valid related field\n3. `pk` is not found by `get_field()` because `pk` is an alias (not a real field)\n4. Then `get_transform('pk')` returns `None` because `pk` is not a transform\n5. E015 is incorrectly raised\n\n## Solution\n\nAdded a check in the related field validation loop in `django/db/models/base.py:1715` to skip the error when `part == 'pk'`, since `pk` is a valid alias for the primary key field and should always be allowed for ordering.\n\nThe existing code already had special handling for direct `pk` ordering (line 1725-1727), but this didn't extend to related field lookups like `relation__pk`.\n\n## Files Modified\n- `django/db/models/base.py`: Added check for `part != 'pk'` before raising E015 in related field validation\n\n## Test Results\n\n**Baseline (before fix):**\n- 63 tests passed in `tests/invalid_models_tests/test_models.py`\n\n**After fix:**\n- 63 tests passed in `tests/invalid_models_tests/test_models.py` (no regressions)\n\n**Edge cases verified:**\n- `parent__pk` - now works (the fix)\n- `parent__id` - still works (unchanged)\n- `pk` - still works (unchanged)\n- `parent__grand_parent__pk` - works (multi-level relation)\n- `parent__nonexistent_field` - correctly raises E015 (unchanged)\n\n## Concerns\nNone. The fix is minimal, focused, and aligns with the existing pattern of treating `pk` as a special case.",
      "created_at": "2026-02-03T00:27:38.232Z"
    },
    {
      "epic_id": "bcaab66c-52c5-4abb-9530-cb0b1de3ce0c",
      "epic_title": "Fix: django__django-11820",
      "comment_id": "dbd291c4-e69a-4d04-a0cb-06e4342e5d77",
      "author_name": "Code Reviewer",
      "content": "Code review PASSED.\n\n- Diff is minimal and focused: only `django/db/models/base.py` updated.\n- No test files modified.\n- Change addresses the reported false-positive `models.E015` for `Meta.ordering` values like `option__pk` by treating `pk` as an allowed alias in related-field validation.\n\nNote (non-blocking): if `pk` appears mid-path (e.g., `relation__pk__...`), the check may not validate subsequent parts as intended, but this isn\u2019t required by the problem statement.",
      "created_at": "2026-02-03T00:29:47.958Z"
    }
  ]
}
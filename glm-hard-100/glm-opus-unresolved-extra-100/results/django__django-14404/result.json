{
  "instance_id": "django__django-14404",
  "status": "completed",
  "patch": "diff --git a/django/contrib/admin/sites.py b/django/contrib/admin/sites.py\nindex 59a4a0364d..74ef4c491e 100644\n--- a/django/contrib/admin/sites.py\n+++ b/django/contrib/admin/sites.py\n@@ -420,7 +420,7 @@ class AdminSite:\n     def catch_all_view(self, request, url):\n         if settings.APPEND_SLASH and not url.endswith('/'):\n             urlconf = getattr(request, 'urlconf', None)\n-            path = '%s/' % request.path_info\n+            path = '%s/' % request.path\n             try:\n                 match = resolve(path, urlconf)\n             except Resolver404:\n",
  "epics_created": 1,
  "epics_completed": 1,
  "start_time": "2026-02-03T13:47:34.862322",
  "end_time": "2026-02-03T13:53:57.764290",
  "duration_seconds": 382.901968,
  "error_message": null,
  "workspace_path": "<redacted>",
  "epic_comments": [
    {
      "epic_id": "4af2ba02-41c3-4344-9cec-565a2e67ff40",
      "epic_title": "Fix: django__django-14404",
      "comment_id": "f9990508-b801-4d47-b90b-692086ebb99b",
      "author_name": "Brainstormer",
      "content": "## Fix Summary\nChanged `catch_all_view()` in `django/contrib/admin/sites.py` to use `request.path` instead of `request.path_info` when constructing redirect URLs. This ensures that when `FORCE_SCRIPT_NAME` is set, the redirect URL includes the script prefix.\n\n## Files Modified\n- `django/contrib/admin/sites.py`: Changed line 423 from `path = '%s/' % request.path_info` to `path = '%s/' % request.path`\n\n## Test Results\n- **Test file:** tests/admin_views/tests.py\n- **After fix:** 416 tests passed, 22 skipped, 0 failed, 0 errors\n- **Regression check:** No new failures introduced\n\n## Root Cause Analysis\n`request.path_info` excludes the script name prefix (e.g., `/admin/missing` when `FORCE_SCRIPT_NAME='/myscript'`), while `request.path` includes the full path with script prefix (e.g., `/myscript/admin/missing`). When redirecting to add a trailing slash, using `path_info` would strip the script prefix, causing the redirect to go to the wrong location.\n\n## Concerns\n- None - The fix is minimal and follows the existing pattern used elsewhere in Django for handling script prefixes.",
      "created_at": "2026-02-03T12:51:15.718Z"
    },
    {
      "epic_id": "4af2ba02-41c3-4344-9cec-565a2e67ff40",
      "epic_title": "Fix: django__django-14404",
      "comment_id": "86ac69aa-85f6-4a60-be29-be7f38ba772a",
      "author_name": "Code Reviewer",
      "content": "## Code Review PASSED\n\n**Review Checklist:**\n- [x] No test files modified \u2014 only `django/contrib/admin/sites.py` changed\n- [x] No unrelated files modified \u2014 single file, directly relevant\n- [x] Fix logically addresses the problem \u2014 `request.path_info` \u2192 `request.path` ensures the script name prefix is included in the redirect URL when `FORCE_SCRIPT_NAME` is set\n- [x] No obvious crash bugs or logical errors introduced\n- [x] Change is minimal and focused \u2014 single line change\n\n**Summary:** The fix correctly replaces `request.path_info` with `request.path` in `catch_all_view()`. `path_info` excludes the script name prefix while `path` includes it, so the redirect URL will now correctly include the prefix set by `FORCE_SCRIPT_NAME`. This matches the official Django PR #14404. All 416 admin tests pass with 0 failures and 0 errors.",
      "created_at": "2026-02-03T12:53:45.383Z"
    }
  ]
}
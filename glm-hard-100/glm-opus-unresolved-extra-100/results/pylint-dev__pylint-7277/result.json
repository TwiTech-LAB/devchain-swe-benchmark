{
  "instance_id": "pylint-dev__pylint-7277",
  "status": "completed",
  "patch": "diff --git a/pylint/__init__.py b/pylint/__init__.py\nindex 9f3dd74e6..186c1cd79 100644\n--- a/pylint/__init__.py\n+++ b/pylint/__init__.py\n@@ -86,7 +86,7 @@ def modify_sys_path() -> None:\n     stdlib or pylint's own modules.\n     CPython issue: https://bugs.python.org/issue33053\n \n-    - Remove the first entry. This will always be either \"\" or the working directory\n+    - Remove the first entry if it's either \"\" or the working directory\n     - Remove the working directory from the second and third entries\n       if PYTHONPATH includes a \":\" at the beginning or the end.\n       https://github.com/PyCQA/pylint/issues/3636\n@@ -96,7 +96,12 @@ def modify_sys_path() -> None:\n       if pylint is installed in an editable configuration (as the last item).\n       https://github.com/PyCQA/pylint/issues/4161\n     \"\"\"\n-    sys.path.pop(0)\n+    # Only remove the first entry if it's the current working directory.\n+    # When pylint is run via runpy, a custom path may have been inserted\n+    # at the beginning of sys.path, which should not be removed.\n+    # See https://github.com/PyCQA/pylint/issues/7277\n+    if sys.path[0] in (\"\", \".\", os.getcwd()):\n+        sys.path.pop(0)\n     env_pythonpath = os.environ.get(\"PYTHONPATH\", \"\")\n     cwd = os.getcwd()\n     if env_pythonpath.startswith(\":\") and env_pythonpath not in (f\":{cwd}\", \":.\"):\n",
  "epics_created": 1,
  "epics_completed": 1,
  "start_time": "2026-01-31T22:41:30.763162",
  "end_time": "2026-01-31T22:48:52.016024",
  "duration_seconds": 441.252862,
  "error_message": null,
  "workspace_path": "<redacted>",
  "epic_comments": [
    {
      "epic_id": "e16201ad-e961-4e6b-87b4-d33fe324b830",
      "epic_title": "Fix: pylint-dev__pylint-7277",
      "comment_id": "7862507a-b37b-4c39-8e56-42964aefc485",
      "author_name": "Brainstormer",
      "content": "## Fix Summary\n\nFixed the issue where pylint incorrectly removes the first item from `sys.path` when it is not the current working directory. The problem occurred when pylint was run via `runpy` and the user had added a custom path to `sys.path[0]` before calling runpy.\n\n## Root Cause\n\nThe `modify_sys_path()` function in `pylint/__init__.py` unconditionally removed `sys.path[0]` without checking if it was actually the current working directory. The comment stated \"This will always be either \"\" or the working directory\", but this assumption was incorrect when pylint was run via `runpy` after a user modified `sys.path`.\n\n## Files Modified\n\n- `pylint/__init__.py` (lines 99-104): Added a conditional check before removing the first item from `sys.path`. Now only removes `sys.path[0]` if it is one of `\"\"`, `\".\"`, or `os.getcwd()`.\n\n## Test Results\n\n- **Test file:** `/testbed/tests/test_self.py`\n- **Baseline (before fix):** test_modify_sys_path PASSED, 107 passed in TestRunTC\n- **After fix:** test_modify_sys_path PASSED, 107 passed in TestRunTC\n- **Regression check:** No new failures introduced\n\n## Additional Verification\n\nVerified the fix with manual tests:\n1. Custom path at `sys.path[0]` is now preserved (PASS)\n2. Empty string at `sys.path[0]` is still removed (PASS)\n3. Dot at `sys.path[0]` is still removed (PASS)\n4. cwd at `sys.path[0]` is still removed (PASS)\n\n## Edge Cases Handled\n\n- Empty strings (`\"\"`)\n- Current directory as dot (`\".\"`)\n- Current directory as absolute path (`os.getcwd()`)\n- Custom/unknown paths (preserved)\n- Multiple consecutive empty strings in `sys.path`",
      "created_at": "2026-01-31T21:47:28.970Z"
    },
    {
      "epic_id": "e16201ad-e961-4e6b-87b4-d33fe324b830",
      "epic_title": "Fix: pylint-dev__pylint-7277",
      "comment_id": "18ff5444-b88e-4a15-81bd-8c317e86250c",
      "author_name": "Code Reviewer",
      "content": "## Code Review PASSED\n\n### Summary\nThe fix correctly addresses the problem where pylint unconditionally removed the first item from `sys.path`, even when it contained a custom path added by the user before calling `runpy`.\n\n### Review Findings\n\n\u2705 **No test files modified** - Only source code (`pylint/__init__.py`) was changed\n\n\u2705 **Root cause addressed** - The unconditional `sys.path.pop(0)` has been replaced with a conditional check that only removes the first item if it's one of `\"\"`, `\".\"`, or `os.getcwd()`\n\n\u2705 **Minimal and focused changes** - Only 7 lines modified, directly addressing the issue\n\n\u2705 **Code quality** - Clean implementation with:\n- Clear conditional logic\n- Good explanatory comment\n- Reference to GitHub issue #7277\n- Consistent with existing code style\n\n\u2705 **Edge cases handled** - Properly handles:\n- Empty string (`\"\"`)\n- Current directory as dot (`\".\"`)\n- Current directory as absolute path (`os.getcwd()`)\n- Custom paths (preserved as expected)\n\n\u2705 **Proper verification** - The Brainstormer:\n- Ran the actual test file (`tests/test_self.py`)\n- Provided baseline comparison (107 tests passed before and after)\n- Performed additional manual verification\n- No regressions introduced\n\n### Conclusion\nThe fix is well-implemented, properly tested, and ready for submission to the SWE-bench harness.",
      "created_at": "2026-01-31T21:48:35.878Z"
    }
  ]
}